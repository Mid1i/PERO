import {Link, useNavigate} from "react-router-dom";
import classNames from "classnames";

import {footerTitles as titles, footerElements} from "@utils/constants";
import {isPWA, toFormatBrandForRequest} from "@utils/helpers";
import FooterMobile from "./FooterMobile/FooterMobile";

import "./Footer.style.scss";

import telegramLogo from "@assets/images/social-media/telegram.svg";


export default function Footer({className='footer', activePage, footerRef}) {
    const navigate = useNavigate();

    const onClickFooterElement = (id, element, elementId) => {
        if (id === 2) {
            navigate(`/catalog/?brands=${toFormatBrandForRequest(element)}`);
        } else {
            const link = footerElements[id - 1].links[elementId];
            navigate(link);
        }
    }

    const onClickFooterTitle = (title) => {
        const links = {
            'О магазине': '/about',
            'Бренды': '/brands',
            'Помощь': '/help'
        };
        
        navigate(links[title]);
    }


    return (
        <footer className={classNames(className, isPWA() && "footer--mobile")} ref={footerRef}>
            {isPWA() ? <FooterMobile activePage={activePage}/> : (
                <div className="footer__wrapper">
                    <div className="footer__wrapper-top footer-top">
                        {titles.map(({id, title}) => (
                                <div className="footer-top__item" key={id}>
                                    <h5 className="footer-top__item-title" onClick={() => onClickFooterTitle(title)}>{title}</h5>
                                    <ul className="footer-top__item-list footer-list">
                                        {footerElements[id - 1].elements.map((element, index) => (
                                            <li 
                                                className="footer-list__el" 
                                                onClick={() => onClickFooterElement(id, element, index)} 
                                                key={index}
                                            >
                                                {element}</li>
                                            )
                                        )}
                                    </ul>
                                </div>
                            )
                        )}
                        <div className="footer-top__item footer-top__item--last">
                            <h5 className="footer-top__item-title">Остались вопросы?</h5>
                            <p className="footer-top__item-text">Мы с радостью на них ответим</p>
                            <Link to='https://t.me/pero_nn_bot'>
                                <button className="footer-top__item-btn footer-btn">
                                    <span className="footer-btn__text">Задать вопрос</span>
                                    <svg className="footer-btn__icon" height="30" viewBox="0 0 30 30" width="30">
                                        <path fillRule="evenodd" clipRule="evenodd" d="M11.8749 2.7753C12.7253 2.59249 13.5926 2.50031 14.4624 2.5003C17.9398 2.48329 21.2538 3.974 23.5481 6.58713C25.8424 9.20027 26.8917 12.6794 26.4249 16.1253C25.6749 21.8753 19.9999 26.5253 14.1999 26.5253H5.87492C5.16726 26.5256 4.51145 26.1542 4.14774 25.5471C3.78403 24.9401 3.76587 24.1867 4.09992 23.5628L4.43742 22.9128C4.77332 22.2867 4.74949 21.529 4.37492 20.9253C2.27705 17.6273 1.91687 13.5142 3.4096 9.90182C4.90234 6.2894 8.06091 3.63036 11.8749 2.7753ZM14.0999 24.6378C19.1957 24.5574 23.5294 20.8981 24.4624 15.8878C24.8862 12.9841 24.0133 10.0409 22.0749 7.8378C20.1549 5.64064 17.3803 4.37864 14.4624 4.3753C13.7234 4.37671 12.9864 4.45208 12.2624 4.6003C9.04385 5.31642 6.37465 7.55314 5.10646 10.5968C3.83828 13.6404 4.12958 17.1107 5.88742 19.9003C6.63528 21.0752 6.68791 22.563 6.02492 23.7878L5.68742 24.4253C5.65994 24.467 5.65994 24.5211 5.68742 24.5628C5.73742 24.6378 5.81242 24.6378 5.81242 24.6378H14.0999Z" fill="#FFFFFF"/>
                                    </svg>
                                </button>
                            </Link>
                        </div>
                    </div>
                    <div className="footer__wrapper-bottom footer-bottom">
                        <p className="footer-bottom__left">© Pero, 2023</p>
                        <div className="footer-bottom__right">
                            <svg className="footer-bottom__right-icon" height="30" viewBox="0 0 31 30" width="31">
                                <circle id="Ellipse 1" cx="15.3335" cy="15" r="15" fill="black"/>
                                <path id="Vector" d="M15.1799 26.9914C14.6405 25.4287 14.2937 24.2892 14.1167 23.5254C13.4182 20.5174 13.3728 17.5266 13.968 14.5137C14.0788 13.9791 14.6672 12.3218 14.9616 11.7341C15.3609 10.9252 16.2617 9.26056 16.2796 9.28443C16.2872 9.30026 16.1671 9.56427 16.0028 9.87833C15.5625 10.7471 14.6131 13.4766 14.4325 14.3938C14.1078 16.0878 13.9974 17.4198 14.0437 19.0528C14.0729 19.9175 14.1775 21.0893 14.2401 21.1728C14.2804 21.2266 14.7221 21.0592 15.0051 20.8749C15.2219 20.7285 15.5149 20.3857 15.5882 20.1795C15.6351 20.0472 15.6289 20.0275 15.5153 20.0135C15.4468 20.0023 15.3955 19.9797 15.4024 19.9602C15.4107 19.9369 15.6254 19.759 15.8791 19.5644C16.5571 19.0472 16.7316 18.8156 17.035 18.091C17.2062 17.6831 17.2719 17.461 17.2368 17.4486C17.2017 17.4361 17.0766 17.4355 16.9475 17.4466C16.3043 17.4942 16.3102 17.4963 16.6379 17.3717C17.1619 17.1767 17.5223 16.7745 17.7416 16.1383C17.8438 15.8504 17.8452 15.8465 17.7125 15.9046C17.3679 16.0582 17.3369 16.0341 17.6313 15.8363C17.8739 15.6727 17.978 15.5651 18.0547 15.3864C18.1147 15.2544 18.1417 15.1413 18.1183 15.133C18.0949 15.1247 17.9911 15.1755 17.8819 15.2419C17.7727 15.3082 17.5838 15.3945 17.4653 15.4313L17.2427 15.5012L17.5198 15.3148C18.1947 14.8622 18.4523 14.4894 18.6539 13.6804L18.7745 13.2106L18.595 13.252C18.4951 13.2735 18.3101 13.3305 18.1933 13.381C17.8846 13.508 17.9273 13.4618 18.3667 13.171C18.9096 12.8117 19.2088 12.5631 19.4102 12.2929C19.6174 12.0248 19.7244 11.7605 19.6425 11.7314C19.543 11.6961 18.4765 11.8037 17.9884 11.8976C17.7203 11.947 17.5116 11.978 17.5171 11.9625C17.5323 11.9197 18.2166 11.6632 18.8337 11.4661C19.4783 11.2657 19.6396 11.1828 19.7868 10.9722C19.8775 10.8467 20.1206 9.84656 20.1634 9.41052L20.1794 9.2541L19.7787 9.36154L19.378 9.46898L19.6296 9.31736C20.0049 9.09577 20.3659 8.7289 20.5342 8.40317C20.6171 8.2442 20.6654 8.10803 20.6478 8.1018C20.6303 8.09556 20.4628 8.15877 20.2681 8.24297C19.9249 8.39273 19.3389 8.5395 19.3045 8.48786C19.2897 8.47384 19.4521 8.36938 19.6564 8.25795C20.7285 7.67044 20.7978 7.56801 20.6918 6.78999L20.623 6.29681L20.4521 6.33252L20.2799 6.37212L20.3751 6.25258C20.5926 5.99251 20.6626 5.60992 20.5835 5.03425C20.5459 4.73175 20.5097 4.42537 20.5156 4.353L20.5161 4.22174L19.7857 4.42239C18.9454 4.65411 18.5216 4.84533 18.0342 5.2155C17.845 5.35859 17.6699 5.48042 17.6437 5.47989C17.6175 5.47935 17.6793 5.3611 17.7783 5.21225C17.8831 5.06548 17.9577 4.92985 17.9429 4.91583C17.9026 4.86211 16.9717 5.14489 16.7966 5.26672C16.5612 5.42846 16.4524 5.75344 16.4183 6.42478C16.4005 6.71634 16.3789 6.96277 16.3658 6.9625C16.3514 6.96613 16.2941 6.70046 16.2386 6.37409C16.1845 6.04384 16.1224 5.75456 16.1059 5.7268C16.0701 5.67905 15.0249 6.22791 14.7109 6.46251C14.5059 6.61312 14.4861 6.72439 14.5725 7.14935C14.6089 7.30683 14.6229 7.43447 14.6084 7.43809C14.5926 7.44561 14.48 7.33556 14.3613 7.20579C14.244 7.07213 14.1359 6.96805 14.1273 6.97375C14.0336 7.01495 13.8809 7.16662 13.8519 7.24832C13.8325 7.30278 13.8981 7.54511 13.9912 7.78407C14.0902 8.02512 14.1517 8.20466 14.131 8.18857C14.1104 8.17247 14.0278 8.1081 13.9438 8.04761C13.7682 7.9108 13.7204 7.91571 13.754 8.08097C13.7721 8.19694 13.7707 8.20083 13.6702 8.11257C13.41 7.88 13.3467 7.83561 13.3019 7.85037C13.1906 7.88533 12.5182 8.77682 12.4436 8.9869C12.3897 9.13863 12.427 9.34903 12.6763 10.2436C12.7806 10.618 12.8657 10.9724 12.8698 11.0352C12.8731 11.1371 12.857 11.127 12.7373 10.9443C12.6698 10.8371 12.4687 10.4941 12.3002 10.1889C12.1331 9.87988 11.98 9.62402 11.9566 9.61571C11.8981 9.59492 11.7114 9.95359 11.4066 10.6821C11.1032 11.4067 11.0601 11.7507 11.2091 12.2592C11.3039 12.5864 11.3892 12.7174 12.0422 13.5144C12.2847 13.8152 12.5053 14.1038 12.5252 14.1591C12.5451 14.2143 12.2453 13.9633 11.8413 13.5789C11.4418 13.2005 11.099 12.9035 11.0701 12.9108C11.0063 12.9232 10.8618 13.9058 10.8465 14.4129C10.8157 15.2606 10.9734 15.7634 11.4818 16.4478C11.6831 16.7164 11.8427 16.9351 11.831 16.931C11.8251 16.9289 11.6365 16.7918 11.4052 16.6265C11.0162 16.3482 10.9883 16.3339 10.9445 16.4016C10.8045 16.6103 10.92 17.269 11.1703 17.6777C11.2484 17.8106 11.3117 17.9294 11.3075 17.9411C11.3034 17.9528 11.1856 17.9504 11.0485 17.928C10.7541 17.8848 10.7244 17.9312 10.8391 18.2392C10.9429 18.5038 10.9471 18.4922 10.7893 18.4537C10.674 18.4259 10.6819 18.4593 10.8689 18.8236C10.982 19.0434 11.2486 19.4623 11.4632 19.7488C11.8182 20.234 11.832 20.2696 11.6705 20.186L11.4974 20.0982L11.6147 20.2319C11.7795 20.4174 12.1364 20.6931 12.5409 20.9462C13.2115 21.3596 13.303 21.5104 13.4516 22.3911C13.825 24.5696 14.9435 27.8055 15.3767 27.9594C15.4176 27.9739 15.461 27.963 15.4693 27.9397C15.479 27.9125 15.3475 27.4846 15.1799 26.9914ZM16.352 9.19186C16.3386 9.17395 16.3452 9.13686 16.3724 9.11587C16.401 9.09098 16.4145 9.10888 16.3993 9.15168C16.3899 9.19655 16.3641 9.21366 16.352 9.19186Z" fill="#E1E0E0"/>
                            </svg>
                            <Link to='https://t.me/pero_nn_bot'>
                                <img className="footer-bottom__right-icon" src={telegramLogo} alt="tg:pero"/>
                            </Link>
                        </div>
                    </div>
                </div>
            )}
        </footer>
    )
}
